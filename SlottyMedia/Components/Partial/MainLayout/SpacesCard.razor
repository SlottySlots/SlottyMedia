@using SlottyMedia.Backend.Services.Interfaces
@using SlottyMedia.Backend.ViewModel.Interfaces
@inject IAuthService AuthService
@inject ISpacesCardVm ViewModel


<Card Class="min-h-[250px] mt-20 mx-7 flex flex-col items-center">

    @if (!AuthService.IsAuthenticated())
    {

    <!-- title -->
    <h3 class="font-semibold text-lg">
        Spaces
    </h3>

    <!-- trending spaces -->
    <div class="w-full border-b border-athens-gray my-3">
        <span h3 class="text-sm font-medium text-center text-cadet-gray w-fit">Trending</span>
    </div>

    <!-- trending spaces elements -->
    <div class="space-y-4">
        @foreach (var space in ViewModel.RecentSpaces)
        {
            <div class="flex flex-col p-4 bg-gray-100 rounded-md w-full">
                <a href="/" class="font-semibold text-l">
                    #@(space.Topic)
                </a>
                <span h3 class="text-sm font-medium text-center text-cadet-gray w-fit">
                    Activity: @(ViewModel.NumOfPostsInSpace[space.ForumId]) Posts
                </span>
            </div>
        }
    </div>

    <!-- recent spaces -->
    <div class="w-full border-b border-athens-gray my-3">
        <span h3 class="text-sm font-medium text-center text-cadet-gray w-fit">Recent</span>
    </div>

    <!-- no (recent) spaces :( -->
    <div class="grow flex flex-col justify-center items-center">
        <span>Sign in to see all spaces!</span>
    </div>
    }
    else
    {
    <!-- title -->
    <h3 class="font-semibold text-lg">
        Spaces
    </h3>

    <!-- trending spaces -->
    <div class="w-full border-b border-athens-gray my-3">
        <span h3 class="text-sm font-medium text-center text-cadet-gray w-fit">Trending</span>
    </div>

    <!-- trending spaces elements -->
    <div class="space-y-4">
        <div class="flex flex-col p-4 bg-gray-100 rounded-md w-full">
            <a href="/" class="font-semibold text-l">#Food</a>
            <span h3 class="text-sm font-medium text-center text-cadet-gray w-fit">Activity: 500 Posts</span>
        </div>
        <div class="flex flex-col p-4 bg-gray-100 rounded-md w-full">
            <a href="/" class="font-semibold text-l">#Football</a>
            <span h3 class="text-sm font-medium text-center text-cadet-gray w-fit">Activity: 300 Posts</span>
        </div>
        <div class="flex flex-col p-4 bg-gray-100 rounded-md w-full">
            <a href="/" class="font-semibold text-l">#Music</a>
            <span h3 class="text-sm font-medium text-center text-cadet-gray w-fit">Activity: 200 Posts</span>
        </div>
    </div>


    <!-- recent spaces -->
    <div class="w-full border-b border-athens-gray my-3">
        <span h3 class="text-sm font-medium text-center text-cadet-gray w-fit">Recent</span>
    </div>

    <!-- recent spaces elements -->
    <div class="space-y-4">
        <div class="flex flex-col p-4 bg-gray-100 rounded-md w-full">
            <a href="/" class="font-semibold text-l">#Food</a>
            <span h3 class="text-sm font-medium text-center text-cadet-gray w-fit">Activity: 500 Posts</span>
        </div>
        <div class="flex flex-col p-4 bg-gray-100 rounded-md w-full">
            <a href="/" class="font-semibold text-l">#Football</a>
            <span h3 class="text-sm font-medium text-center text-cadet-gray w-fit">Activity: 300 Posts</span>
        </div>
    </div>


    <a href="/spaces" class="self-start mb-3 text-sm text-fandango duration-500 hover:text-crayola-orange">
        View all
    </a>

    }

</Card>