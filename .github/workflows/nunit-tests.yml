name: Run NUnit Tests

on: 
  push:
     branches: 
      - '*feat*'
      - '*test*' 
      - '*perf*' 
      - '*style*' 
      - '*fix*' 

jobs:
  tests:
    name: Unit Testing
    env: 
      SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
      SUPABASE_KEY: ${{ secrets.SUPABASE_KEY }}
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@v3
      - run: dotnet test --logger "trx;LogFileName=test_results.trx"

      - name: Upload Test Results
        uses: actions/upload-artifact@v2
        with:
          name: test-results
          path: '**/TestResults/*.trx'
